<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Fuel Flow Calculator - IO-360-B1B 225hp</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f8f8f8; text-align: center; }
    .container { background: white; display: inline-block; padding: 20px; margin-top: 30px; border-radius: 8px; }
    input { margin: 5px; padding: 5px; width: 100px; }
    button { margin: 10px; padding: 8px 16px; }
    table { margin: 20px auto; border-collapse: collapse; }
    th, td { border: 1px solid #999; padding: 8px 12px; }
    th { background: #ddd; }
  </style>
</head>
<body>
  <h2>Fuel Flow Calculator<br>Lycoming IO-360-B1B (Modified 225hp)</h2>
  <div class="container">
    <div>
      <label>MAP (inHg):</label><br>
      <input id="map" type="number" step="0.1"><br>
    </div>
    <div>
      <label>RPM:</label><br>
      <input id="rpm" type="number" step="10"><br>
    </div>
    <div>
      <label>DA (ft):</label><br>
      <input id="da" type="number" step="100"><br>
    </div>
    <button onclick="calculate()">Calculate</button>
  </div>

  <table id="result" style="display:none;">
    <tr><th>% Power</th><th>HP</th><th>Fuel Flow ROP (L/h)</th><th>Fuel Flow LOP (L/h)</th></tr>
    <tr><td id="pwr"></td><td id="hp"></td><td id="rop"></td><td id="lop"></td></tr>
  </table>

  <script>
    function calculate() {
      const map = parseFloat(document.getElementById('map').value);
      const rpm = parseFloat(document.getElementById('rpm').value);
      const da = parseFloat(document.getElementById('da').value);
      const bsfc = 0.41;
      const hpMax = 225;

      // correction densit√© approx ISA
      const rhoRatios = {0:1,5000:0.82,10000:0.74};
      let ratio = 1;
      if (da <= 5000) ratio = 1 - (da/5000)*(1-0.82);
      else ratio = 0.82 - ((da-5000)/5000)*(0.82-0.74);

      const pct = (map/29) * (rpm/2700) * (hpMax/180) * 100 * ratio;
      const hp = hpMax * pct / 100;
      const ff_rop = hp * bsfc / 6 * 3.785;
      const ff_lop = pct <= 60 ? ff_rop * 0.9 : "-";

      document.getElementById('pwr').textContent = pct.toFixed(1) + "%";
      document.getElementById('hp').textContent = hp.toFixed(1);
      document.getElementById('rop').textContent = ff_rop.toFixed(1);
      document.getElementById('lop').textContent = ff_lop === "-" ? "-" : ff_lop.toFixed(1);

      document.getElementById('result').style.display = "table";
    }
  </script>
</body>
</html>
